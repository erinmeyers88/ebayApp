angular.module("app", ["ui.router"]);



angular.module("app").config(["$stateProvider", "$urlRouterProvider", function ($stateProvider, $urlRouterProvider) {
	

	$urlRouterProvider
		.otherwise("/");
		
	$stateProvider
		.state("home", {
			url: "/",
			templateUrl: "./minified/features/searchPage/searchPage.html",
			controller: "searchPageCtrl"
		});	
	
	
}]);



angular.module("app").service("searchService", ["$http", function ($http) {
	
	this.search = function (searchInput) {
		
		var appID = "ErinVinc-7802-4a69-9ae1-1a5889e5f7b0";
		
		return $http({
			method: "GET",
			url: "http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=JSON&appid=" + appID + "&siteid=0&version=525&QueryKeywords=" + searchInput + "&AvailableItemsOnly=true&MaxEntries=2"
		}).then(function (response) {
			console.log("response", response.data);
			return response.data;
		});
		
	};
	
	
}]);
angular.module("app").controller("searchPageCtrl", ["$scope", "searchService", function ($scope, searchService) {

		$scope.search = function (searchInput) {
			searchService.search(searchInput).then(function (response) {
				$scope.searchResults = response;
			});
		};
		
		
		
}]);